<article>
    <time datetime="@($"{Message.Timestamp:yyyy-MM-dd}T{Message.Timestamp:hh:mm:ss}Z")">
        @Message.Timestamp.ToString("f")
    </time>
    @MessageText
    @if (Message.IsNew && MessageAudio != null)
    {
        <audio autoplay>
            <source src="@MessageAudio" />
        </audio>
    }
</article>

@code {
    [Parameter] public Message Message { get; set; }
    [Parameter] public string Language { get; set; }
    string? MessageText;
    string? MessageAudio;

    protected override void OnInitialized()
    {
        var translation = Message.Translations.FirstOrDefault(x => x.Language == Language);
        MessageText = translation?.Text ?? Message.Text;
        MessageAudio = translation?.AudioId ?? Message.AudioId;

    }
}
