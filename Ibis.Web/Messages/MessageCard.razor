@inherits RealtimeComponent

<article class="message-card" @onclick="GoToSubroom">
    <div class="background" style="background: @Message.User.BackgroundColor"></div>
    <Avatar User="Message.User" />
    @if (Message.Audio?.Url != null)
    {
        <MessageAudio Audio="Message.Audio" />
    }
    <p>@Message.Text</p>
</article>

@code {
    [Parameter] public Message Message { get; set; } = new();

    protected override async Task OnInitializedAsync()
    {
        await On<MessageTextChanged>(Message.Id, x => Message.Text = x.Message.Text);
        await On<MessageAudioChanged>(Message.Id, x => Message.Audio = x.Message.Audio);
    }

    void GoToSubroom()
    {
        //if (Message != null)
        //    Nav.NavigateTo($"/rooms/{Message.SubroomId}");
    }
}
