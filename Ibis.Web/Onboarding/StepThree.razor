@page "/step-three"
@layout EmptyLayout

<div class="onboarding">
    <h3>Creating a room</h3>
    <p>
        With Ibis, you are able to create rooms for specific teams, topics, or uses.
        <br /><br />
        You can create a room for yourself, to act as a way to upload,
        translate and transcribe audio, video and text documents.
        <br /><br />
        Or, add team members to start chatting live.
    </p>

    <div class="room-icons">
        <label>Room Icon</label>
        <div class="room-icon-wrapper">
            <a class="room-icon">
                <img src="/icons/User-Voice__Outline.svg" />
            </a>
            <a class="room-icon">
                <img src="/icons/Circle.svg" />
            </a>
            <a class="room-icon">
                <img src="/icons/Speech.svg" />
            </a>
            <a class="room-icon">
                <img src="/icons/Send-Arrow.svg" />
            </a>
        </div>
    </div>
    
    <div class="room-name-wrapper">
        <label>Room Name</label>
        <input type="email" placeholder="Enter Room Name" @bind="NewRoom.RoomName" />
    </div>
    
    <label>Invite Room Members (Optional)</label>
    <div class="invite-search">
        <input type="email" placeholder="Email" />
        <button class="secondary">Add Member</button>
    </div>

    @if (Room != null)
    {
        <RoomShare Room="Room" />
    }

    <div class="bottom-nav">
        <div class="actions">
            <div class="steps">
                <div class="step-circle step-active">
                    <i class="material-icons-outlined">check_circle</i>
                </div>
                <hr class="step-line line-active" />
                <div class="step-circle step-active">
                    <i class="material-icons-outlined">check_circle</i>
                </div>
                <hr class="step-line line-active" />
                <div class="step-circle step-active">
                    <i class="material-icons-outlined">adjust</i>
                </div>
                <hr class="step-line" />
                <div class="step-circle">
                    <i class="material-icons-outlined">adjust</i>
                </div>
            </div>
            <div class="buttons">
                <button class="skip" @onclick="@(e => Nav.NavigateTo($"/step-four", true))">Skip</button>
                <button class="next" @onclick="@(e => GoTo("step-four"))">Confirm</button>
            </div>
        </div>
    </div>
</div>

@code {
    private UserSummary? User;
    private NewRoomRequest NewRoom = new();
    private GetRoomResponse? Room;

    protected override async Task OnInitializedAsync()
    {
        User = await Api.GetUserAsync();
    }

    async Task CreateRoom()
    {
        Room = await Api.CreateRoomAsync(NewRoom);//, Participants = Group
        Nav.NavigateTo($"/step-four", true);
    }


    void GoTo(string page)
    {
        Nav.NavigateTo($"/{page}", true);
    }

    
}