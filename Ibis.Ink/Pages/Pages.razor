@page "/websites/{WebsiteId}"
@layout DashboardLayout

<Breadcrumbs WebsiteId="@WebsiteId"/>
<div class="pages">
    <header class="page--header">
        <h2>Website Title</h2>
        <div class="search--container">
            <div class="searchbar">
                <SearchIcon />
                <input type="text" placeholder="Search..." />
            </div>
            <div class="sort">
                <select>
                    <option>Sort</option>
                </select>
            </div>
        </div>
    </header>
    <div class="pages-list">
        @if (Rooms != null)
        {
            foreach (var room in Rooms)
            {
                string? endpoint = "/" + @room.Name;
                <PageCard WebsiteId="@room.RoomId" Type="Page" Title="@room.Name" Endpoint="@endpoint" DateModified="@room.LastActiveDate"/>
            }
        }
        <PageCard WebsiteId=@WebsiteId Type="Page" Title="Home" Endpoint="/Home" DateModified="@DateTime.Now" />
        <PageCard WebsiteId=@WebsiteId Type="Page" Title="About" Endpoint="/About" DateModified="@DateTime.Now" />
        <PageCard WebsiteId=@WebsiteId Type="Page" Title="21 Days of Blossom" Endpoint="/21days" DateModified="@DateTime.Now" />
        <PageCard WebsiteId=@WebsiteId Type="Blog" Title="Welcome to Blossom" Endpoint="/21days/Welcome" DateModified="@DateTime.Now" />
        <PageCard WebsiteId=@WebsiteId Type="Other" Title="Sparc Entities" Endpoint="/21days/SparcEntities" DateModified="@DateTime.Now" />
    </div>
</div>

@code {
    [Parameter] public string? WebsiteId { get; set; }

    ICollection<GetRoomResponse>? Rooms;
    string? HostUserId = "3d8ead49-e805-4b3d-811c-f6659c493fbb"; //Christine

    //[Parameter] public string? Title { get; set; }

    protected override async Task OnInitializedAsync()
    {
        var rooms = await Api.GetRoomsAsync("Content");
        Rooms = rooms.HostedRooms.Union(rooms.InvitedRooms).ToList();
    }
}